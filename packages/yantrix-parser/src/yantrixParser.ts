import {
	JisonParser,
	JisonParserApi,
	StateType,
	SymbolsType,
	TerminalsType,
	ProductionsType,
} from '@ts-jison/parser';
/**
 * parser generated by  @ts-jison/parser-generator 0.4.1-alpha.2
 * @returns Parser implementing JisonParserApi and a Lexer implementing JisonLexerApi.
 */
export class YantrixParser extends JisonParser implements JisonParserApi {
	$?: any;
	symbols_: SymbolsType = {
		error: 2,
		start: 3,
		document: 4,
		EOF: 5,
		line: 6,
		statements: 7,
		NewLine: 8,
		InitialState: 9,
		ContextDefinitions: 10,
		EventEmitStatement: 11,
		SubscribeStatement: 12,
		ContextStatement: 13,
		'<=': 14,
		'(': 15,
		KeyList: 16,
		')': 17,
		'#{': 18,
		'}': 19,
		'emit/': 20,
		EventName: 21,
		'subscribe/': 22,
		'=>': 23,
		ActionStatement: 24,
		ActionName: 25,
		KeyItem: 26,
		',': 27,
		TargetProperty: 28,
		'=': 29,
		Expression: 30,
		FunctionOperator: 31,
		Property: 32,
		StringDeclaration: 33,
		Array: 34,
		Constant: 35,
		integerLiteral: 36,
		FunctionName: 37,
		Arguments: 38,
		Ident: 39,
		PropertyArgument: 40,
		decimalLiteral: 41,
		'$(': 42,
		ConstantReference: 43,
		$accept: 0,
		$end: 1,
	};
	terminals_: TerminalsType = {
		2: 'error',
		5: 'EOF',
		8: 'NewLine',
		9: 'InitialState',
		14: '<=',
		15: '(',
		17: ')',
		18: '#{',
		19: '}',
		20: 'emit/',
		21: 'EventName',
		22: 'subscribe/',
		23: '=>',
		25: 'ActionName',
		27: ',',
		28: 'TargetProperty',
		29: '=',
		32: 'Property',
		33: 'StringDeclaration',
		34: 'Array',
		36: 'integerLiteral',
		37: 'FunctionName',
		40: 'PropertyArgument',
		41: 'decimalLiteral',
		42: '$(',
		43: 'ConstantReference',
	};
	productions_: ProductionsType = [
		0,
		[3, 2],
		[4, 0],
		[4, 2],
		[6, 1],
		[6, 1],
		[7, 1],
		[7, 1],
		[7, 1],
		[7, 1],
		[10, 1],
		[10, 5],
		[13, 3],
		[11, 2],
		[11, 6],
		[12, 4],
		[24, 1],
		[24, 4],
		[16, 1],
		[16, 3],
		[26, 3],
		[26, 1],
		[30, 1],
		[30, 1],
		[30, 1],
		[30, 1],
		[30, 1],
		[30, 1],
		[31, 3],
		[31, 4],
		[38, 0],
		[38, 1],
		[38, 1],
		[38, 3],
		[39, 1],
		[39, 1],
		[39, 1],
		[39, 1],
		[39, 1],
		[35, 3],
	];
	table: Array<StateType>;
	defaultActions: { [key: number]: any } = { 3: [2, 1] };

	constructor(yy = {}, lexer = new YantrixLexer(yy)) {
		super(yy, lexer);

		// shorten static method to just `o` for terse STATE_TABLE
		const $V0 = [5, 8, 9, 18, 20, 22],
			$V1 = [1, 20],
			$V2 = [1, 25],
			$V3 = [17, 19, 27],
			$V4 = [1, 39],
			$V5 = [1, 40],
			$V6 = [2, 30],
			$V7 = [1, 55],
			$V8 = [1, 54],
			$V9 = [1, 52],
			$Va = [1, 53],
			$Vb = [1, 60],
			$Vc = [17, 27];
		const o = JisonParser.expandParseTable;
		this.table = [
			o($V0, [2, 2], { 3: 1, 4: 2 }),
			{ 1: [3] },
			{
				5: [1, 3],
				6: 4,
				7: 5,
				8: [1, 6],
				9: [1, 7],
				10: 8,
				11: 9,
				12: 10,
				13: 11,
				18: [1, 14],
				20: [1, 12],
				22: [1, 13],
			},
			{ 1: [2, 1] },
			o($V0, [2, 3]),
			o($V0, [2, 4]),
			o($V0, [2, 5]),
			o($V0, [2, 6]),
			o($V0, [2, 7]),
			o($V0, [2, 8]),
			o($V0, [2, 9]),
			o($V0, [2, 10], { 14: [1, 15] }),
			{ 21: [1, 16] },
			{ 21: [1, 17] },
			{ 16: 18, 26: 19, 28: $V1 },
			{ 15: [1, 21] },
			o($V0, [2, 13], { 14: [1, 22] }),
			{ 23: [1, 23] },
			{ 19: [1, 24], 27: $V2 },
			o($V3, [2, 18]),
			o($V3, [2, 21], { 29: [1, 26] }),
			{ 16: 27, 26: 19, 28: $V1 },
			{ 15: [1, 28] },
			{ 24: 29, 25: [1, 30] },
			o([5, 8, 9, 14, 18, 20, 22], [2, 12]),
			{ 26: 31, 28: $V1 },
			{
				30: 32,
				31: 33,
				32: [1, 34],
				33: [1, 35],
				34: [1, 36],
				35: 37,
				36: [1, 38],
				37: $V4,
				42: $V5,
			},
			{ 17: [1, 41], 27: $V2 },
			{ 16: 42, 26: 19, 28: $V1 },
			o($V0, [2, 15]),
			o($V0, [2, 16], { 15: [1, 43] }),
			o($V3, [2, 19]),
			o($V3, [2, 20]),
			o($V3, [2, 22]),
			o($V3, [2, 23]),
			o($V3, [2, 24]),
			o($V3, [2, 25]),
			o($V3, [2, 26]),
			o($V3, [2, 27]),
			{ 15: [1, 44] },
			{ 43: [1, 45] },
			o($V0, [2, 11]),
			{ 17: [1, 46], 27: $V2 },
			{ 16: 47, 26: 19, 28: $V1 },
			{
				17: [1, 48],
				27: $V6,
				31: 51,
				33: $V7,
				35: 56,
				36: $V8,
				37: $V4,
				38: 49,
				39: 50,
				40: $V9,
				41: $Va,
				42: $V5,
			},
			{ 17: [1, 57] },
			o($V0, [2, 14]),
			{ 17: [1, 58], 27: $V2 },
			o($V3, [2, 28]),
			{ 17: [1, 59], 27: $Vb },
			o($Vc, [2, 31]),
			o($Vc, [2, 32]),
			o($Vc, [2, 34]),
			o($Vc, [2, 35]),
			o($Vc, [2, 36]),
			o($Vc, [2, 37]),
			o($Vc, [2, 38]),
			o($V3, [2, 39]),
			o($V0, [2, 17]),
			o($V3, [2, 29]),
			o($Vc, $V6, {
				39: 50,
				31: 51,
				35: 56,
				38: 61,
				33: $V7,
				36: $V8,
				37: $V4,
				40: $V9,
				41: $Va,
				42: $V5,
			}),
			{ 17: [2, 33], 27: $Vb },
		];
	}

	performAction(
		yytext: string,
		yyleng: number,
		yylineno: number,
		yy: any,
		yystate: number /* action[1] */,
		$$: any /* vstack */,
		_$: any /* lstack */,
	): any {
		/* this == yyval */
		var $0 = $$.length - 1;
		switch (yystate) {
			case 1:
				return $$[$0 - 1];
				break;
			case 2:
				this.$ = { contextDescription: [], emit: [], subscribe: [] };
				break;
			case 3:
				if ($$[$0] !== '\n') {
					if ($$[$0].hasOwnProperty('context'))
						$$[$0 - 1]['contextDescription'].push($$[$0]);
					if ($$[$0].hasOwnProperty('eventName'))
						$$[$0 - 1]['emit'].push($$[$0]);
					if ($$[$0].hasOwnProperty('event'))
						$$[$0 - 1]['subscribe'].push($$[$0]);
				}

				break;
			case 6:
				this.$ = { initialState: true };
				break;
			case 10:
				this.$ = { context: $$[$0] };
				break;
			case 11:
				this.$ = { context: $$[$0 - 4], payload: $$[$0 - 1] };
				break;
			case 12:
				this.$ = $$[$0 - 1];
				break;
			case 13:
				this.$ = { eventName: $$[$0] };
				break;
			case 14:
				this.$ = {
					eventName: $$[$0 - 4],
					payload: $$[$0 - 1],
				};
				break;
			case 15:
				this.$ = {
					event: $$[$0 - 2],
					action: $$[$0],
				};

				break;
			case 16:
				this.$ = { actionName: $$[$0] };
				break;
			case 17:
				this.$ = {
					actionName: $$[$0 - 3],
					payload: $$[$0 - 1],
				};
				break;
			case 18:
				this.$ = [$$[$0]];
				break;
			case 19:
				$$[$0 - 2].push($$[$0]);
				break;
			case 20:
				this.$ = {
					KeyItemDeclaration: {
						TargetProperty: $$[$0 - 2],
						Expression: $$[$0],
					},
				};
				break;
			case 21:
				this.$ = {
					KeyItemDeclaration: {
						TargetProperty: $$[$0].toLowerCase(),
					},
				};
				break;
			case 23:
				this.$ = { Property: $$[$0] };
				break;
			case 24:
				this.$ = { StringDeclaration: $$[$0].toString() };
				break;
			case 25:
				this.$ = { ArrayDeclaration: [] };
				break;
			case 27:
				this.$ = { IntegerValue: Number($$[$0]) };
				break;
			case 28:
				this.$ = {
					FunctionDeclaration: {
						FunctionName: $$[$0 - 2],
						Arguments: [],
					},
				};
				break;
			case 29:
				this.$ = {
					FunctionDeclaration: {
						FunctionName: $$[$0 - 3].toLowerCase(),
						Arguments: [...$$[$0 - 1]],
					},
				};
				break;
			case 30:
				this.$ = [];
				break;
			case 31:
			case 32:
				this.$ = [$$[$0]];
				break;
			case 33:
				this.$ = [...$$[$0 - 2], ...$$[$0]];
				break;
			case 34:
				this.$ = { FunctionProperty: $$[$0] };
				break;
			case 35:
				this.$ = { decimalLiteral: $$[$0] };
				break;
			case 36:
				this.$ = { IntegerValue: Number($$[$0]) };
				break;
			case 37:
				this.$ = { StringDeclaration: $$[$0] };
				break;
			case 39:
				this.$ = { ConstantReference: $$[$0 - 1] };
				break;
		}
	}
}

/* generated by @ts-jison/lexer-generator 0.4.1-alpha.2 */
import { JisonLexer, JisonLexerApi } from '@ts-jison/lexer';

export class YantrixLexer extends JisonLexer implements JisonLexerApi {
	options: any = { 'case-insensitive': true, moduleName: 'Yantrix' };
	constructor(yy = {}) {
		super(yy);
	}

	rules: RegExp[] = [
		/^(?:$)/i,
		/^(?:[\r\n]+)/i,
		/^(?:[\s]+)/i,
		/^(?:,)/i,
		/^(?:\+INITIAL\b)/i,
		/^(?:note\b)/i,
		/^(?:\))/i,
		/^(?:\()/i,
		/^(?:left\b)/i,
		/^(?:right\b)/i,
		/^(?:end\b)/i,
		/^(?:'[^\n#{()=><"]+')/i,
		/^(?:of\s)/i,
		/^(?:[^\n#{()=><]+)/i,
		/^(?:subscribe\/)/i,
		/^(?:[^/=>\s]+)/i,
		/^(?:=>[\s])/i,
		/^(?:<=[\s])/i,
		/^(?:[A-Za-z]{1,}[A-Za-z0-9\.]+(?=[(]))/i,
		/^(?:[A-Za-z]{1,}[A-Za-z0-9\.]+(?=[(]))/i,
		/^(?:[^=#{}][A-Za-z]+)/i,
		/^(?:emit\/)/i,
		/^(?:[^()=<\n]+)/i,
		/^(?:#\{)/i,
		/^(?:[^(')=,][A-Za-z]+)/i,
		/^(?:[^(',)][A-Za-z_]+)/i,
		/^(?:=)/i,
		/^(?:[A-Za-z]{1,}[A-Za-z0-9\.]+(?=[(]))/i,
		/^(?:\})/i,
		/^(?:[^\}\()>\s\n<=]+)/i,
		/^(?:[0-9]+\.[0-9]+)/i,
		/^(?:[0-9]+)/i,
		/^(?:\$\()/i,
		/^(?:[A-Za-z_]+)/i,
		/^(?:\))/i,
		/^(?:\[\])/i,
	];
	conditions: any = {
		leftArrow: {
			rules: [
				0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 21, 23,
				28, 30, 31, 32, 35,
			],
			inclusive: true,
		},
		rightSideOperation: {
			rules: [
				0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 19, 20,
				21, 23, 28, 30, 31, 32, 35,
			],
			inclusive: true,
		},
		KeyList: {
			rules: [
				0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 21, 23,
				24, 26, 27, 28, 30, 31, 32, 35,
			],
			inclusive: true,
		},
		Constant: {
			rules: [
				0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 21, 23,
				28, 30, 31, 32, 33, 34, 35,
			],
			inclusive: true,
		},
		Prop: {
			rules: [
				0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 21, 23,
				28, 30, 31, 32, 35,
			],
			inclusive: true,
		},
		Func: {
			rules: [
				0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 18, 21,
				23, 25, 28, 30, 31, 32, 35,
			],
			inclusive: true,
		},
		Note: { rules: [13], inclusive: false },
		Payload: { rules: [], inclusive: false },
		SubcribeStatement: { rules: [15], inclusive: false },
		EmitStatement: { rules: [22], inclusive: false },
		ActionStatement: { rules: [29], inclusive: false },
		PayloadValue: { rules: [], inclusive: false },
		PayloadStatement: { rules: [], inclusive: false },
		ContextInitialValue: { rules: [], inclusive: false },
		ContextStatement: { rules: [], inclusive: false },
		INITIAL: {
			rules: [
				0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 21, 23,
				28, 30, 31, 32, 35,
			],
			inclusive: true,
		},
	};
	performAction(
		yy: any,
		yy_: any,
		$avoiding_name_collisions: any,
		YY_START: any,
	): any {
		var YYSTATE = YY_START;
		switch ($avoiding_name_collisions) {
			case 0:
				return 5;
				break;
			case 1:
				return 8;
				break;
			case 2 /* skip all whitespace */:
				break;
			case 3:
				return 27;
				break;
			case 4:
				return 9;
				break;
			case 5:
				return 'note';
				break;
			case 6:
				this.popState();
				return 17;
				break;
			case 7:
				return 15;
				break;
			case 8:
				return 'left';
				break;
			case 9:
				return 'right';
				break;
			case 10:
				return 'end';
				break;
			case 11:
				this.popState();
				yy_.yytext = yy_.yytext.slice(1, -1);
				return 33;
				break;
			case 12:
				this.begin('Note');
				return 'of';
				break;
			case 13:
				this.popState();
				return 'StateID';
				break;
			case 14:
				this.begin('SubcribeStatement');
				return 22;
				break;
			case 15:
				this.popState();
				return 21;
				break;
			case 16:
				this.popState();
				this.begin('ActionStatement');
				return 23;
				break;
			case 17:
				this.begin('KeyList');
				return 14;
				break;
			case 18:
				this.begin('Func');
				return 37;
				break;
			case 19:
				this.popState();
				this.begin('Func');
				return 37;
				break;
			case 20:
				this.popState();
				return 32;
				break;
			case 21:
				this.begin('EmitStatement');
				return 20;
				break;
			case 22:
				this.popState();
				return 21;
				break;
			case 23:
				this.begin('KeyList');
				return 18;
				break;
			case 24:
				yy_.yytext = yy_.yytext.toLowerCase();
				return 28;
				break;
			case 25:
				return 40;
				break;
			case 26:
				this.begin('rightSideOperation');
				return 29;
				break;
			case 27:
				yy_.yytext = yy_.yytext.toLowerCase();
				this.begin('Func');
				return 37;
				break;
			case 28:
				this.popState();
				return 19;
				break;
			case 29:
				this.popState();
				this.begin('KeyList');
				return 25;
				break;
			case 30:
				return 41;
				break;
			case 31:
				return 36;
				break;
			case 32:
				this.begin('Constant');
				return 42;
				break;
			case 33:
				return 43;
				break;
			case 34:
				this.popState();
				return 17;
				break;
			case 35:
				return 34;
				break;
		}
	}
}
